{% extends 'main.html' %}
{% load static %}

{% block content  %}


<section class="hero-section text-center">
    <div class="container container--narrow">
        <div class="hero-section__box">
            <h2>Search Patient <span>Reports</span></h2>
        </div>

        <div class="hero-section__search">
            <form id='searchForm' class="form" action="{% url 'paitent' %}" method="get">
                <div class="form__field">
                    <label for="formInput#search">Search By Projects </label>
                    <input class="input input--text" id="formInput#search" type="text" name="search_query"
                        placeholder="Search by Patient Name" value="" />
                </div>

                <input class="btn btn--sub btn--lg" type="submit" value="Search" />
            </form>
        </div>
    </div>
</section>
 <!-- Table Part Start  -->
<div class="container">
    <br><br>
    <a href="{% url 'bloodAnalysis' %}" class="btn btn--sub">Blood</a>
    <a href="{% url 'urinAnalysis' %}" class="btn btn--sub">Urin</a>

        <br><br>



        <div style="overflow-x:auto;">
            <h3>Total count ( HBG, RBC, WBC, PLT )</h3>
            <table class="content-table">
                <thead>
                <tr>
                    <th>Date</th>
                    <th>Hemoglobin (/L)</th>
                    <th>RBC ( x 10^12 /L)</th>
                    <th>WBC ( x 10^9 /L)</th>
                    <th>Platelates ( x 10^9 /L)</th>
                    <td>View</td>
        
                    
                </tr>
                </thead>
                <tbody >
                
                    {% for p in pr1 %}
                    <tr class="active-row">
                        
                        <td>{{  p.date }}</td>
                        <td>{{  p.hbg }}</td>
                        <td>{{  p.rbc }}</td>
                        <td>{{  p.wbc }}</td>
                        <td>{{  p.plt }}</td>
                        <td>Show</td>
                    
                        
                    </tr>
                    {% endfor %}    
                </tbody>
            </table>
            
        </div>

    </div>
 <!-- Table Part End  -->

  <!-- Visualizayion Part Start  -->

{% comment %} <div class="iframebox"> {% endcomment %}


    <div class="chartCard">

        <div class="chartBox">
            <canvas id="myChart"></canvas>
        </div>
        <div class="chartBox">
            <canvas id="lineChart"></canvas>
        </div>

        <div class="chartBox">
            <canvas id="pieChart"></canvas>
        </div>

        <div class="chartBox">
            <canvas id="pieChart1"></canvas>
        </div>


    </div>

    {% comment %} <div class="chartCard">

  
    </div> {% endcomment %}



    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


    <script>

        // Hemuglobin data file
        const data = {

            labels: [{% for p in pr1  %} '{{ p.date }}', {% endfor %}],
            datasets: [{
                label: 'Hemoglobin',
                data: [{% for p in pr1  %} {{ p.hbg }}, {% endfor %}],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 3
            }] 
        };



        // Config bar chart
        const config = {

            type: 'line',
                data,
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }

        };
        //Render init Block

        const myChart = new Chart(
            document.getElementById('myChart'),
            config
        );





        //Red Blood Cell  Chart config

        const rbc = {

            labels: [{% for p in pr1  %} '{{ p.date }}', {% endfor %}],
            datasets: [{
                label: 'Red Blood Cell',
                data: [{% for p in pr1  %} {{ p.rbc }}, {% endfor %}],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 3
            }] 
        };


        const config2 = {

            type: 'line',
                data: rbc,
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }

            };

        const lineChart = new Chart(
            document.getElementById('lineChart'),
            config2
        );


        // White blood cell 


        const da = {

                labels: [{% for p in pr1  %} '{{ p.date }}', {% endfor %}],
                datasets: [{
                    label: 'White Blood Cell ( x 10^9 /L )',
                    data: [{% for p in pr1  %} {{ p.wbc }}, {% endfor %}],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 3
                }] 
            };


        const config4 = {

            type: 'line',
                data: da,
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }

            };

            const pieChart = new Chart(
            document.getElementById('pieChart'),
            config4
            );



    // Platelates chart  chart


    const da1 = {

        labels: [{% for p in pr1  %} '{{ p.date }}', {% endfor %}],
        datasets: [{
            label: 'Platelates',
            data: [{% for p in pr1  %} {{ p.plt }}, {% endfor %}],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 3
        }] 
        };


        const config5 = {

        type: 'bar',
        data: da1,
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }

        };

        const pieChart1 = new Chart(
        document.getElementById('pieChart1'),
        config5
        );






    </script>


{% comment %} </div> {% endcomment %}
  <!-- Visualizayion Part End  -->


{% endblock  %}