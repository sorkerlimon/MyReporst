{% extends 'main.html' %}
{% load static %}

{% block content  %}

<style>
    table {
        border-collapse: collapse;
        border: 1px solid black;
        text-align: center;
        vertical-align: middle;
      }
      
      th, td {
        
        padding: 8px;
      }
      thead th {
        width: 25%;
      }
      .cell-highlight-red {
        background-color: rgb(247, 132, 142);
        font-weight: bold;
      }
      .cell-highlight-yellow {
        background-color: rgb(231, 215, 122);
        font-weight: bold;
      }
      .cell-highlight-green {
        background-color: rgb(117, 248, 167);
        font-weight: bold;
      }
      thead {
        background-color: #333;
        color: white;
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 2%;
      }
      tbody tr:nth-child(odd) {
        background-color: #fff;
      }
      
      tbody tr:nth-child(even) {
        background-color: #eee;
      }
      tbody th {
        background-color: #12a587;
        color: #fff;
        text-align: left;
      }
      tbody tr:nth-child(even) th {
        background-color: #009879;
      }
</style>

<main id="main" class="main">
    <div class="pagetitle">
        <h1>CBC Analysis</h1>
        <nav>
           <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Home</a></li>
              <li class="breadcrumb-item active"><a href="{% url 'cbc_' %}">CBC</a></li>
              <li class="breadcrumb-item active">CBC Chart</li>

           </ol>
        </nav>
    </div>

    <section class="section card-body pt-5">

        <h4>Complete Blood Count (CBC) </h4>

        <div class="row">
            <table>
                
                <thead>
                  <tr>
                    <th>Perameter</th>
                    <th>Values</th>
                    <th>Unit</th>
                    <th>RF- Value</th>
                  <tr>
                </thead>
                <tbody>
                    {% comment %} Totall Count {% endcomment %}
                    
                {% if pr1 %}
                {% for p in pr1  %}
                  <tr>

                    <th>Hemoglobin</th>
                    {% if  p.hbg is not None and p.hbg > -1 %}
                        <td class="cell-highlight-red">{{  p.hbg }}</td>
                        {% else %}
                        <td>Value Not Availabale </td>
                    {% endif %}
                    
                    <td>10 <sup>12</sup>/L</td>
                    <td>Male (130 - 180) & Female (110 - 160)</td>

                  </tr>
                  <tr>

                    <th>Red Blood cell</th>
                    {% if  p.rbc is not None and p.rbc > -1 %}
                        <td class="cell-highlight-green">{{  p.rbc }}</td>
                        {% else %}
                        <td>Value Not Availabale </td>
                    {% endif %}
                
                    <td> 10<sup>12</sup>/L</td>
                    <td>Male (4.2 - 5.8), Female (3.8 - 5.0)</td>

                  </tr>
                  <tr>

                    <th>White Blood Cell</th>
                    {% if  p.wbc is not None and p.wbc > -1 %}
                        <td class="cell-highlight-yellow">{{  p.wbc }}</td>
                        {% else %}
                        <td>Value Not Availabale </td>
                    {% endif %}
                    <td>10<sup>9</sup>/L</td>
                    <td>Male & Female (4.2 - 11.0)</td>

                  </tr>
                  <tr>

                    <th>Platelates Cell</th>
                    {% if  p.plt is not None and p.plt > -1 %}
                        <td >{{  p.plt }}</td>
                        {% else %}
                        <td>Value Not Availabale </td>
                    {% endif %}
                    <td>10<sup>9</sup> /L</td>
                    <td>Male & Female (150 - 450)</td>
                    
                  </tr>
                  {% endfor %}
                  {% endif %}

                  {% comment %} Absolute Count {% endcomment %}
                  {% if pr2 %}
                  {% for p in pr2  %}
                  
                  <tr>

                    <th>Absolute Neutrophil</th>
                        {% if  p.neutrophil is not None and p.neutrophil > -1 %}
                            <td>{{  p.neutrophil }}</td>
                        {% else %}
                            <td>Value Not Availabale </td>
                        {% endif %}
                    <td>10<sup>9</sup>/L</td>
                    <td>Male & Female (2.0 - 6.5)</td>

                  </tr>
                 
                  <tr>

                    <th>Absolute Lymphocyte</th>
                    {% if  p.lymphocyte is not None and p.lymphocyte > -1 %}
                         <td>{{  p.lymphocyte }}</td>
                    {% else %}
                         <td>Value Not Availabale </td>
                      {% endif %}
                    <td> 10<sup>9</sup>/L</td>
                    <td>Male & Female (1.0 - 4.8)</td>

                  </tr>
                  <tr>
                    

                    <th>Absolute Monocyte</th>
                    {% if  p.monocyte is not None and p.monocyte > -1 %}
                        <td class="cell-highlight">{{  p.monocyte }}</td>
                        {% else %}
                        <td>Value Not Availabale </td>
                    {% endif %}
                    
                    <td>10<sup>9</sup>/L</td>
                    <td>Male & Female (0.2 - 0.8)</td>

                  </tr>
                  <tr>

                    <th>Absolute Eosinophil</th>
                  
                    {% if  p.eosinophil is not None and p.eosinophil > -1 %}
                        <td>{{  p.eosinophil }}</td>
                        {% else %}
                        <td>Value Not Availabale </td>
                    {% endif %}
                    <td>10<sup>9</sup>/L</td>
                    <td>Male & Female ( < 0.5)</td>

                  </tr>
                  <tr>

                    <th>Absolute Basophil</th>                
                    {% if  p.basophil is not None and p.basophil > -1 %}
                        <td>{{  p.basophil }}</td>
                        {% else %}
                        <td>Value Not Availabale </td>
                    {% endif %}
                    <td>10<sup>9</sup>/L</td>
                    <td>Male & Female ( < 0.25)</td>

                  </tr>
                  {% endfor %}
                  {% endif %}


                                  {% comment %} Differentialleukocyte Count {% endcomment %}
                                  {% if pr3 %}
                                  {% for p in pr3  %}
                                  <tr>
                                    <th>Differential Neutrophil</th>
                                    
                                    <td>{{  p.neutrophil2 }}</td>
                                   
                                    <td> % </td>
                                    <td>Male & Female ( 40% - 75%)</td>
                                  </tr>
                                  <tr>
                                    <th>Differential Lymphocyte</th>
                                
                                    <td>{{  p.lymphocyte2 }}</td>
                                  
                                    <td> % </td>
                                    <td>Male & Female ( 20% - 50%)</td>
                                  </tr>
                                  <tr>
                                    <th>Differential Monocyte %</th>
                                  
                                    <td class="cell-highlight">{{  p.monocyte2 }}</td>
                                   
                                    <td> % </td>
                                    <td>Male & Female ( 2% - 8%)</td>
                                  </tr>
                                  <tr>
                                    <th>Differential Eosinophil</th>
                                    
                                    <td >{{  p.eosinophil2 }}</td>
                              
                                    <td> % </td>
                                    <td>Male & Female ( 1% - 5%)</td>
                                  </tr>
                                  <tr>
                                    <th>Differential Basophil</th>
                         
                                    <td >{{  p.basophil2 }}</td>
                                  
                                    <td> % </td>
                                    <td>Male & Female ( < 1%)</td>
                                  </tr>
                                  {% endfor %}
                                  {% endif %}
                                                  {% comment %} Redcellindices Count {% endcomment %}
                                                  {% if pr4 %}
                                                  {% for p in pr4  %}
                                                  <tr>
                                                    <th>Hematocrit (PCV)</th>
                                                    
                                                    <td>{{  p.pcv }}</td>
                                                  
                                                    <td> % </td>
                                                    <td>Male (40 - 50) & Female (36 - 46)</td>
                                                  </tr>
                                                  <tr>
                                                    <th>Mean Corpuscular Volume ( MCV )</th>
                                                
                                                    <td>{{  p.mcv }}</td>
                                                   
                                                    <td> fL</td>
                                                    <td>Male %% Female (80 - 98)</td>
                                                  </tr>
                                                  <tr>
                                                    <th>Mean Corpuscular Hemoglobin ( MCH )</th>
                                                   
                                                    <td class="cell-highlight">{{  p.mch }}</td>
                                                   
                                                    <td> fmol </td>
                                                    <td>Male & Female (1.65 - 2)</td>
                                                  </tr>
                                                  <tr>
                                                    <th> Mean Corpuscular Hemoglobin Concentration</th>
                                                
                                                    <td >{{  p.mchc }}</td>
                                              
                                                    <td>mmol/L</td>
                                                    <td>Male & Female (18.6 - 22.3)</td>
                                                  </tr>
                                                  <tr>
                                                    <th>Red cell distribution width (RDW)</th>
                                               
                                                    <td >{{  p.rdw }}</td>
                                               
                                                    <td> % </td>
                                                    <td>Male & Female (11.5 - 15)</td>
                                                  </tr>
                                                  {% endfor %}
                                                  {% endif %}

                                                                                                  {% comment %} Pltpanel Count {% endcomment %}
                                                                                                  {% if pr5 %}
                                                                                                  {% for p in pr5  %}
                                                                                                  <tr>
                                                                                                    <th>Plateletcrit ( PCT )</th>
                                                                                                   
                                                                                                    <td>{{  p.pct }}</td>
                                                                                                  
                                                                                                    <td> % </td>
                                                                                                    <td>Male & Female (0.2 - 0.5)</td>
                                                                                                  </tr>
                                                                                                  <tr>
                                                                                                    <th>Mean Platelet Volume ( MPV )</th>
                                                                                                  
                                                                                                    <td>{{  p.mpv }}</td>
                                                                                                  
                                                                                                    <td> fL </td>
                                                                                                    <td>Male & Female (7.0 - 12.0)</td>
                                                                                                  </tr>
                                                                                                  <tr>
                                                                                                    <th>Platelet Distribution Width ( PDW )</th>
                                                                                                   
                                                                                                    <td class="cell-highlight">{{  p.pdw }}</td>
                                                                                                  
                                                                                                    <td> % </td>
                                                                                                    <td>Male & Female (10.0 - 17.9)</td>
                                                                                                  </tr>
                                                                                                  {% endfor %}
                                                                                                  {% endif %}




                </tbody>
              </table>
  
        </div>
        <br><br>



        {% comment %} visualization analysis {% endcomment %}
        <div class="row">
            {% comment %} RBC {% endcomment %}
            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        Red Blood Cells ( x10^12 /L)
                    </div>
                    {% for p in pr1  %} {% if p.rbc > -1%}
                        <div class="card-body rbc" >
                            <canvas id="rbcChart"></canvas>
                        </div>

                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            const rbc = {              
                                labels: [{% for p in pr1  %} '{{ prof.testdate }}', {% endfor %}],
                                datasets: [{
                                    label: 'Male (4.2 - 5.8), Female (3.8 - 5.0)',
                                    data: [{% for p in pr1  %} {{ p.rbc }}, {% endfor %}],
                                    backgroundColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 4.1 <= p.rbc and p.rbc <= 5.8 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%else%}
                                            {% if 3.8 <= p.rbc and p.rbc <= 5.0 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%endif%}
                                    ],
                                    borderColor: [
                                    {% if profile.gender == "male" %}
                                        {% if 4.1 <= p.rbc and p.rbc <= 5.8 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                    {%else%}
                                        {% if 3.8 <= p.rbc and p.rbc <= 5.0 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                    {%endif%}
                                    ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                                const redDoubleArbitraryLine = {
                                    id: 'redDoubleArbitraryLine',
                                    beforeDraw(chart, args, options) {
                                        const { ctx, chartArea: { top, right, bottom, left, width, height },
                                        scales: { x,y } } = chart;
                                        ctx.save()
                                        console.log(ctx)
                                        // Danger 
                                        ctx.strokeStyle = 'black',
                                        ctx.setLineDash([4, 4]),
                                        ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 5.8 {%else%} 5.0 {% endif %}), width, 0);
                                        ctx.restore();
                                        // Danger 
                                        ctx.strokeStyle = 'black',
                                        ctx.setLineDash([4, 4]),
                                        ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 4.2 {%else%} 3.8 {% endif %}), width, 0);
                                        ctx.restore();
                                    }
                                }

                            const rbcconfig = {
                    
                                type: 'bar',
                                    data: rbc,
                                    options: {
                                        scales: {
                                            y: {
                                                min: 0,
                                                max: {% if p.rbc > 8 %} {{p.rbc}} {%else%} 8 {% endif %},
                                            }
                                        }
                                    },     
                                    plugins: [redDoubleArbitraryLine]
                                };

                    
                            const rbcChart = new Chart(
                                document.getElementById('rbcChart'),
                                rbcconfig
                            );
                        </script>
                    {%else%} <div align='center'><br>Value not Availabale<br>Check the corresponding report (Image)</div> {%endif%} {%endfor%}
                </div>
            </div>

            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        White Blood Cell ( x10^9 /L)
                    </div>

                    {% for p in pr1  %} {% if p.wbc > -1%}
                        <div class="card-body wbc">
                            <canvas id="wbcChart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                        // White blood cell 
                                    
                        const wbc = {
                    
                                    labels: [{% for p in pr1  %} '{{ prof.testdate }}', {% endfor %}],
                                    datasets: [{
                                        label: 'Male & Female ( 4.2 - 11.0 )',
                                        data: [{% for p in pr1  %} {{ p.wbc }}, {% endfor %}],
                                        backgroundColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 4.2 <= p.wbc and p.wbc <= 11.0 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%else%}
                                            {% if 4.2 <= p.wbc and p.wbc <= 11.0 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%endif%}

                                    ],
                                        borderColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 4.2 <= p.wbc and p.wbc <= 11.0 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                        {%else%}
                                            {% if 4.2 <= p.wbc and p.wbc <= 11.0 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                        {%endif%}

                                    ],
                                        borderWidth: 3
                                    }] 
                                };
                            
                            // doubleArbitraryLine Plugin
                            const wbcDoubleArbitraryLine = {
                                id: 'wbcDoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                    
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 11.0 {%else%} 11.0 {% endif %}), width, 0);
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 4.2 {%else%} 4.2 {% endif %}), width, 0);
                                    ctx.restore();
                                }
                            }
                    
                    
                            const wbcconfig = {
                    
                                type: 'bar',
                                    data: wbc,
                                    options: {
                                        scales: {
                                            y: {
                                                min: 0,
                                                max: {% if p.wbc > 15 %} {{p.wbc}} {%else%} 15 {% endif %},
                                            }
                                        }
                                    },
                                    plugins: [wbcDoubleArbitraryLine]
                    
                                };
                    
                            const wbcChart = new Chart(
                            document.getElementById('wbcChart'),
                            wbcconfig
                            );
                        </script>
                    {%else%} <div align='center'><br>Value not Availabale<br>Check the corresponding report (Image)</div> {%endif%} {%endfor%}
                </div>
            </div>



            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        Platelates ( x10^9 /L)
                    </div>
                    {% for p in pr1  %} {% if p.plt > -1%}
                        <div class="card-body plt">
                            <canvas id="pltChart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            const plt = {
                    
                                labels: [{% for p in pr1  %} '{{ prof.testdate }}' , {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female ( 150 - 450)',
                                    data: [{% for p in pr1  %} {{ p.plt }} , {% endfor %}],
                                    backgroundColor: [
                                    {% if profile.gender == "male" %}
                                        {% if 150 <= p.plt and p.plt <= 450 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                    {%else%}
                                        {% if 150 <= p.plt and p.plt <= 450 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                    {%endif%}

                                ],
                                    borderColor: [
                                    {% if profile.gender == "male" %}
                                        {% if 150 <= p.plt and p.plt <= 450 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                    {%else%}
                                        {% if 150 <= p.plt and p.plt <= 450 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                    {%endif%}

                                ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const pltDoubleArbitraryLine = {
                                id: 'pltDoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                    
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 450.0 {%else%} 450.0 {% endif %}), width, 0);
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 150.0 {%else%} 150.0 {% endif %}), width, 0);
                                    ctx.restore();
                                }
                            }
                    
                    
                            const pltconfig = {
                    
                                type: 'bar',
                                data: plt,
                                options: {
                                    scales: {
                                        y: {
                                            min: 0,
                                            max: {% if p.plt > 600 %} {{p.plt}} {%else%} 600 {% endif %},
                                        }
                                    }
                                },
                                plugins: [pltDoubleArbitraryLine]         
                            };
                    
                            const pltChart = new Chart(
                                document.getElementById('pltChart'),
                                pltconfig
                            );
                        </script>
                    {%else%} <div align='center'><br>Value not Availabale<br>Check the corresponding report (Image)</div> {%endif%} {%endfor%}
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        Hemoglobin (g/L)
                    </div>
                    {% for p in pr1  %} {% if p.hbg > -1%}
                        <div class="card-body hbg">
                            <canvas id="hbgChart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            const hbg = {
                    
                                labels: [{% for p in pr1  %} '{{ prof.testdate }}' , {% endfor %}],
                                datasets: [{
                                    label: 'Male (130 - 180) & Female (110 - 160)',
                                    data: [{% for p in pr1  %} {{ p.hbg }} , {% endfor %}],
                                    backgroundColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 130 <= p.hbg and p.hbg <= 180 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%else%}
                                            {% if 110 <= p.hbg and p.hbg <= 160 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%endif%}

                                    ],
                                        borderColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 130 <= p.hbg and p.hbg <= 180 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                        {%else%}
                                            {% if 110 <= p.hbg and p.hbg <= 160 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                        {%endif%}

                                    ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const hbgDoubleArbitraryLine = {
                                id: 'hbgDoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                    
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 180.0 {%else%} 160.0 {% endif %}), width, 0);
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 130.0 {%else%} 110.0 {% endif %}), width, 0);
                                    ctx.restore();
                                }
                            }
                                       
                            const hbgconfig = {
                    
                                type: 'bar',
                                data: hbg,
                                options: {
                                    scales: {
                                        y: {
                                            min: 0,
                                            max: {% if p.hbg > 200 %} {{p.hbg}} {%else%} 200 {% endif %},
                                        }
                                    }
                                },
                                plugins: [hbgDoubleArbitraryLine]         
                            };
                    
                            const hbgChart = new Chart(
                                document.getElementById('hbgChart'),
                                hbgconfig
                            );
                        </script>
                    {%else%} <div align='center'><br>Value not Availabale<br>Check the corresponding report (Image)</div> {%endif%} {%endfor%}
                </div>
            </div>






            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        Absolute Neutrophil (x 10^9 /L)
                    </div>
                    {% for p in pr2  %} {% if p.neutrophil > -1%}
                        <div class="card-body neutrophil">
                            <canvas id="neutrophilChart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            const neutrophil = {
                    
                                labels: [{% for p in pr2  %} '{{ prof.testdate }}' , {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female (2.0 - 6.5)',
                                    data: [{% for p in pr2  %} {{ p.neutrophil }} , {% endfor %}],
                                    backgroundColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 2 <= p.neutrophil and p.neutrophil <= 6.5 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%else%}
                                            {% if 2 <= p.neutrophil and p.neutrophil <= 6.5 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%endif%}

                                    ],
                                    borderColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 2 <= p.neutrophil and p.neutrophil <= 6.5 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                        {%else%}
                                            {% if 2 <= p.neutrophil and p.neutrophil <= 6.5 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                        {%endif%}

                                    ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const neutrophilDoubleArbitraryLine = {
                                id: 'neutrophilDoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                    
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 6.5 {%else%} 6.5 {% endif %}), width, 0);
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 2.0 {%else%} 2.0 {% endif %}), width, 0);
                                    ctx.restore();
                                }
                            }
                    
                    
                            const neutrophilconfig = {
                    
                                type: 'bar',
                                data: neutrophil,
                                options: {
                                    scales: {
                                        y: {
                                            min: 0,
                                            max: {% if p.neutrophil > 8 %} {{p.neutrophil}} {%else%} 8 {% endif %},
                                        }
                                    }
                                },
                                plugins: [neutrophilDoubleArbitraryLine]         
                            };
                    
                            const neutrophilChart = new Chart(
                                document.getElementById('neutrophilChart'),
                                neutrophilconfig
                            );
                        </script>
                    {%else%}
                     <div align='center'><br>Value not Availabale<br>Check the corresponding report (Image)</div> {%endif%} {%endfor%}
                </div>
            </div>



            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        Absolute Lymphocyte ( x10^9 /L)
                    </div>
                    {% for p in pr2  %} {% if p.lymphocyte > -1%}
                        <div class="card-body lymphocyte">
                            <canvas id="lymphocyteChart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            const lymphocyte = {
                    
                                labels: [{% for p in pr2  %} '{{ prof.testdate }}' , {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female (1.0 - 4.8)',
                                    data: [{% for p in pr2  %} {{ p.lymphocyte }} , {% endfor %}],
                                    backgroundColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 1 <= p.lymphocyte and p.lymphocyte <= 4.8 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%else%}
                                            {% if 1 <= p.lymphocyte and p.lymphocyte <= 4.8 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%endif%}

                                    ],
                                        borderColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 1 <= p.lymphocyte and p.lymphocyte <= 4.8 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                        {%else%}
                                            {% if 1 <= p.lymphocyte and p.lymphocyte <= 4.8 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                        {%endif%}

                                    ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const lymphocyteDoubleArbitraryLine = {
                                id: 'lymphocyteDoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                    
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 1.0 {%else%} 1.0 {% endif %}), width, 0);
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 4.8 {%else%} 4.8 {% endif %}), width, 0);
                                    ctx.restore();
                                }
                            }
                    
                    
                            const lymphocyteconfig = {
                    
                                type: 'bar',
                                data: lymphocyte,
                                options: {
                                    scales: {
                                        y: {
                                            min: 0,
                                            max: {% if p.lymphocyte > 6 %} {{p.lymphocyte}} {%else%} 6 {% endif %},
                                        }
                                    }
                                },
                                plugins: [lymphocyteDoubleArbitraryLine]         
                            };
                    
                            const lymphocyteChart = new Chart(
                                document.getElementById('lymphocyteChart'),
                                lymphocyteconfig
                            );
                        </script>
                    {%else%} <div align='center'><br>Value not Availabale<br>Check the corresponding report (Image)</div> {%endif%} {%endfor%}
                </div>
            </div>
        </div>
        <br>



        <div class="row">
            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        Absolute Monocyte ( x10^9 /L)
                    </div>
                    {% for p in pr2  %} {% if p.monocyte > -1%}
                        <div class="card-body monocyte">
                            <canvas id="monocyteChart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            const monocyte = {
                    
                                labels: [{% for p in pr2  %} '{{ prof.testdate }}' , {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female (0.2 - 0.8)',
                                    data: [{% for p in pr2  %} {{ p.monocyte }} , {% endfor %}],
                                    backgroundColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 0.2 <= p.monocyte and p.monocyte <= 0.8 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%else%}
                                            {% if 0.2 <= p.monocyte and p.monocyte <= 0.8 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%endif%}

                                    ],
                                        borderColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 0.2 <= p.monocyte and p.monocyte <= 0.8 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                        {%else%}
                                            {% if 0.2 <= p.monocyte and p.monocyte <= 0.8 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                        {%endif%}

                                    ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const monocyteDoubleArbitraryLine = {
                                id: 'monocyteDoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                    
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 0.8 {%else%} 0.8 {% endif %}), width, 0);
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 0.2 {%else%} 0.2 {% endif %}), width, 0);
                                    ctx.restore();
                                }
                            }
                    
                    
                            const monocyteconfig = {
                    
                                type: 'bar',
                                data: monocyte,
                                options: {
                                    scales: {
                                        y: {
                                            min: 0,
                                            max: {% if p.monocyte > 1 %} {{p.monocyte}} {%else%} 1 {% endif %},
                                        }
                                    }
                                },
                                plugins: [monocyteDoubleArbitraryLine]         
                            };
                    
                            const monocyteChart = new Chart(
                                document.getElementById('monocyteChart'),
                                monocyteconfig
                            );
                        </script>
                    {%else%} <div align='center'><br>Value not Availabale<br>Check the corresponding report (Image)</div> {%endif%} {%endfor%}
                </div>
            </div>

            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        Absolute Eosinophil ( x10^9 /L)
                    </div>
                    {% for p in pr2  %} {% if p.eosinophil > -1%}
                        <div class="card-body eosinophil">
                            <canvas id="eosinophilChart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            const eosinophil = {
                    
                                labels: [{% for p in pr2  %} '{{ prof.testdate }}' , {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female ( < 0.5)',
                                    data: [{% for p in pr2  %} {{ p.eosinophil }} , {% endfor %}],
                                    backgroundColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 0 <= p.eosinophil and p.eosinophil <= 0.5 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%else%}
                                            {% if 0 <= p.eosinophil and p.eosinophil <= 0.5 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%endif%}

                                    ],
                                        borderColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 0 <= p.eosinophil and p.eosinophil <= 0.5 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                        {%else%}
                                            {% if 0 <= p.eosinophil and p.eosinophil <= 0.5 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                        {%endif%}

                                    ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const eosinophilDoubleArbitraryLine = {
                                id: 'eosinophilDoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                    
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 0.5 {%else%} 0.5 {% endif %}), width, 0);
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 0 {%else%} 0 {% endif %}), width, 0);
                                    ctx.restore();
                                }
                            }
                    
                    
                            const eosinophilconfig = {
                    
                                type: 'bar',
                                data: eosinophil,
                                options: {
                                    scales: {
                                        y: {
                                            min: 0,
                                            max: {% if p.eosinophil > 0.6 %} {{p.eosinophil}} {%else%} 0.6 {% endif %},
                                        }
                                    }
                                },
                                plugins: [eosinophilDoubleArbitraryLine]         
                            };
                    
                            const eosinophilChart = new Chart(
                                document.getElementById('eosinophilChart'),
                                eosinophilconfig
                            );
                        </script>
                    {%else%} <div align='center'><br>Value not Availabale<br>Check the corresponding report (Image)</div> {%endif%} {%endfor%}
                </div>
            </div>


            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        Absolute Basophil ( x10^9 /L)
                    </div>
                    {% for p in pr2  %} {% if p.basophil > -1%}
                        <div class="card-body basophil">
                            <canvas id="basophilChart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            const basophil = {
                    
                                labels: [{% for p in pr2  %} '{{ prof.testdate }}' , {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female ( < 0.25)',
                                    data: [{% for p in pr2  %} {{ p.basophil }} , {% endfor %}],
                                    backgroundColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 0 <= p.basophil and p.basophil <= 0.25 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%else%}
                                            {% if 0 <= p.basophil and p.basophil <= 0.25 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                        {%endif%}

                                    ],
                                        borderColor: [
                                        {% if profile.gender == "male" %}
                                            {% if 0 <= p.basophil and p.basophil <= 0.25 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                        {%else%}
                                            {% if 0 <= p.basophil and p.basophil <= 0.25 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                        {%endif%}

                                    ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const basophilDoubleArbitraryLine = {
                                id: 'basophilDoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                    
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 0.25 {%else%} 0.25 {% endif %}), width, 0);
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 0 {%else%} 0 {% endif %}), width, 0);
                                    ctx.restore();
                                }
                            }
                    
                    
                            const basophilconfig = {
                    
                                type: 'bar',
                                data: basophil,
                                options: {
                                    scales: {
                                        y: {
                                            min: 0,
                                            max: {% if p.basophil > 0.4 %} {{p.basophil}} {%else%} 0.4 {% endif %},
                                        }
                                    }
                                },
                                plugins: [basophilDoubleArbitraryLine]         
                            };
                    
                            const basophilChart = new Chart(
                                document.getElementById('basophilChart'),
                                basophilconfig
                            );
                        </script>
                    {%else%} <div align='center'><br>Value not Availabale<br>Check the corresponding report (Image)</div> {%endif%} {%endfor%}

                </div>
            </div>   
        </div>

        <div class="row">
            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        Differential Neutrophil (%)
                    </div>
                    {% for p in pr3  %} {% if p.neutrophil2 > -1%}
                        <div class="card-body neutrophil2" >
                            <canvas id="neutrophil2Chart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            //Red Blood Cell  Chart config
                    
                            const neutrophil2 = {
                    
                                labels: [{% for p in pr3  %} '{{ prof.testdate }}', {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female (40% - 75%)',
                                    data: [{% for p in pr3  %} {{ p.neutrophil2 }}, {% endfor %}],
                                        backgroundColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 40 <= p.neutrophil2 and p.neutrophil2 <= 75 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%else%}
                                                {% if 40 <= p.neutrophil2 and p.neutrophil2 <= 75 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%endif%}

                                        ],
                                            borderColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 40 <= p.neutrophil2 and p.neutrophil2 <= 75 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%else%}
                                                {% if 40 <= p.neutrophil2 and p.neutrophil2 <= 75 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%endif%}

                                        ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const neutrophil2DoubleArbitraryLine = {
                                id: 'neutrophil2DoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                        
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 75 {%else%} 75 {% endif %}), width, 0);                   
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 40 {%else%} 40 {% endif %}), width, 0);
                                    ctx.restore();
                                    }
                                }
                    
                    
                            const neutrophil2config = {
                    
                                type: 'bar',
                                    data: neutrophil2,
                                    options: {
                                        scales: {
                                            y: {
                                                min: 0,
                                                max: {% if p.neutrophil2 > 100 %} {{p.neutrophil2}} {%else%} 100 {% endif %},
                                            }
                                        }
                                    },     
                                    plugins: [neutrophil2DoubleArbitraryLine]
                                };

                    
                            const neutrophil2Chart = new Chart(
                                document.getElementById('neutrophil2Chart'),
                                neutrophil2config
                            );
                        </script>
                    {%else%} <div align='center'><br>Value not Availabale<br>Check the corresponding report (Image)</div> {%endif%} {%endfor%}

                </div>   
            </div>

            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        Differential Lymphocyte (%)
                    </div>
                    {% for p in pr3  %} {% if p.lymphocyte2 > -1%}
    
                    <div class="card-body lymphocyte2" >
                        <canvas id="lymphocyte2Chart"></canvas>
                    </div>
                    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                    <script>
                        //Red Blood Cell  Chart config
                
                        const lymphocyte2 = {
                
                            labels: [{% for p in pr3  %} '{{ prof.testdate }}', {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female (20% - 50%)',
                                    data: [{% for p in pr3  %} {{ p.lymphocyte2 }}, {% endfor %}],
                                            backgroundColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 20 <= p.lymphocyte2 and p.lymphocyte2 <= 50 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%else%}
                                                {% if 20 <= p.lymphocyte2 and p.lymphocyte2 <= 50 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%endif%}

                                        ],
                                            borderColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 20 <= p.lymphocyte2 and p.lymphocyte2 <= 50 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%else%}
                                                {% if 20 <= p.lymphocyte2 and p.lymphocyte2 <= 50 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%endif%}

                                        ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const lymphocyte2DoubleArbitraryLine = {
                                id: 'lymphocyte2DoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                        
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 50 {%else%} 50 {% endif %}), width, 0);                   
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 20 {%else%} 20 {% endif %}), width, 0);
                                    ctx.restore();
                                    }
                                }
                    
                    
                            const lymphocyte2config = {
                    
                                type: 'bar',
                                    data: lymphocyte2,
                                    options: {
                                        scales: {
                                            y: {
                                                min: 0,
                                                max: {% if p.lymphocyte2 > 60 %} {{p.lymphocyte2}} {%else%} 60 {% endif %},
                                            }
                                        }
                                    },     
                                    plugins: [lymphocyte2DoubleArbitraryLine]
                                };

                    
                            const lymphocyte2Chart = new Chart(
                                document.getElementById('lymphocyte2Chart'),
                                lymphocyte2config
                            );
                        </script>
                    {%else%} <div align='center'><br>Value not Availabale<br>Check the corresponding report (Image)</div> {%endif%} {%endfor%}

                </div>   
            </div>


            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        Differential Monocyte (%)
                    </div>
                    {% for p in pr3  %} {% if p.monocyte2 > -1%}

                        <div class="card-body monocyte2" >
                            <canvas id="monocyte2Chart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            //Red Blood Cell  Chart config
                    
                            const monocyte2 = {
                    
                                labels: [{% for p in pr3  %} '{{ prof.testdate }}', {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female (02% - 08%)',
                                    data: [{% for p in pr3  %} {{ p.monocyte2 }}, {% endfor %}],
                                            backgroundColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 2 <= p.monocyte2 and p.monocyte2 <= 8 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%else%}
                                                {% if 2 <= p.monocyte2 and p.monocyte2 <= 8 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%endif%}

                                        ],
                                            borderColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 2 <= p.monocyte2 and p.monocyte2 <= 8 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%else%}
                                                {% if 2 <= p.monocyte2 and p.monocyte2 <= 8 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%endif%}

                                        ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const monocyte2DoubleArbitraryLine = {
                                id: 'monocyte2DoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                        
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 8 {%else%} 8 {% endif %}), width, 0);                   
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 02 {%else%} 02 {% endif %}), width, 0);
                                    ctx.restore();
                                    }
                                }
                    
                    
                            const monocyte2config = {
                    
                                type: 'bar',
                                    data: monocyte2,
                                    options: {
                                        scales: {
                                            y: {
                                                min: 0,
                                                max: {% if p.monocyte2 > 10 %} {{p.monocyte2}} {%else%} 10 {% endif %},
                                            }
                                        }
                                    },     
                                    plugins: [monocyte2DoubleArbitraryLine]
                                };

                    
                            const monocyte2Chart = new Chart(
                                document.getElementById('monocyte2Chart'),
                                monocyte2config
                            );
                        </script>
                    {%else%} <div align='center'><br>Value not Availabale<br>Check the corresponding report (Image)</div> {%endif%} {%endfor%}

                </div>   
            </div>
        </div>



        <div class="row">
            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        Differential Eosinophil (%)
                    </div>
                    {% for p in pr3  %} {% if p.eosinophil2 > -1%}
                        <div class="card-body eosinophil2" >
                            <canvas id="eosinophil2Chart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            //Red Blood Cell  Chart config
                    
                            const eosinophil2 = {
                    
                                labels: [{% for p in pr3  %} '{{ prof.testdate }}', {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female (01% - 05%)',
                                    data: [{% for p in pr3  %} {{ p.eosinophil2 }}, {% endfor %}],
                                            backgroundColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 1 <= p.eosinophil2 and p.eosinophil2 <= 5 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%else%}
                                                {% if 1 <= p.eosinophil2 and p.eosinophil2 <= 5 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%endif%}

                                        ],
                                            borderColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 1 <= p.eosinophil2 and p.eosinophil2 <= 5 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%else%}
                                                {% if 1 <= p.eosinophil2 and p.eosinophil2 <= 5 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%endif%}

                                        ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const eosinophil2DoubleArbitraryLine = {
                                id: 'eosinophil2DoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                        
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 5 {%else%} 5 {% endif %}), width, 0);                   
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 1 {%else%} 1 {% endif %}), width, 0);
                                    ctx.restore();
                                    }
                                }
                    
                    
                            const eosinophil2config = {
                    
                                type: 'bar',
                                    data: eosinophil2,
                                    options: {
                                        scales: {
                                            y: {
                                                min: 0,
                                                max: {% if p.eosinophil2 > 6 %} {{p.eosinophil2}} {%else%} 6 {% endif %},
                                            }
                                        }
                                    },     
                                    plugins: [eosinophil2DoubleArbitraryLine]
                                };

                    
                            const eosinophil2Chart = new Chart(
                                document.getElementById('eosinophil2Chart'),
                                eosinophil2config
                            );
                        </script>
                    {%else%} <div align='center'><br>Value not Availabale<br>Check the corresponding report (Image)</div> {%endif%} {%endfor%}
                </div>   
            </div>



            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        Differential Basophil (%)
                    </div>
                    {% for p in pr3  %} {% if p.basophil2 > -1%}
                        <div class="card-body basophil2" >
                            <canvas id="basophil2Chart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            //Red Blood Cell  Chart config
                    
                            const basophil2 = {
                    
                                labels: [{% for p in pr3  %} '{{ prof.testdate }}', {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female ( < 01%)',
                                    data: [{% for p in pr3  %} {{ p.basophil2 }}, {% endfor %}],
                                            backgroundColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 0 <= p.basophil2 and p.basophil2 <= 1 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%else%}
                                                {% if 0 <= p.basophil2 and p.basophil2 <= 1 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%endif%}

                                        ],
                                            borderColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 0 <= p.basophil2 and p.basophil2 <= 1 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%else%}
                                                {% if 0 <= p.basophil2 and p.basophil2 <= 1 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%endif%}

                                        ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const basophil2DoubleArbitraryLine = {
                                id: 'basophil2DoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                        
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 1 {%else%} 1 {% endif %}), width, 0);                   
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 0 {%else%} 0 {% endif %}), width, 0);
                                    ctx.restore();
                                    }
                                }
                    
                    
                            const basophil2config = {
                    
                                type: 'bar',
                                    data: basophil2,
                                    options: {
                                        scales: {
                                            y: {
                                                min: 0,
                                                max: {% if p.basophil2 > 1.5 %} {{p.basophil2}} {%else%} 1.5 {% endif %},
                                            }
                                        }
                                    },     
                                    plugins: [basophil2DoubleArbitraryLine]
                                };

                    
                            const basophil2Chart = new Chart(
                                document.getElementById('basophil2Chart'),
                                basophil2config
                            );
                        </script>
                    {%else%} <div align='center'><br>Value not Availabale<br>Check the corresponding report (Image)</div> {%endif%} {%endfor%}

                </div>   
            </div>

            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        Hematocrit (PCV) (%)
                    </div>
                    {% for p in pr4  %} {% if p.pcv > -1%}
    
                        <div class="card-body pcv" >
                            <canvas id="pcvChart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            //Red Blood Cell  Chart config
                    
                            const pcv = {
                    
                                labels: [{% for p in pr4  %} '{{ prof.testdate }}', {% endfor %}],
                                datasets: [{
                                    label: 'Male (40 - 50) & Female (36 - 46)',
                                    data: [{% for p in pr4  %} {{ p.pcv }}, {% endfor %}],
                                            backgroundColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 40 <= p.pcv and p.pcv <= 50 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%else%}
                                                {% if 36 <= p.pcv and p.pcv <= 46 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%endif%}

                                        ],
                                            borderColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 40 <= p.pcv and p.pcv <= 50 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%else%}
                                                {% if 36 <= p.pcv and p.pcv <= 46 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%endif%}

                                        ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const pcvDoubleArbitraryLine = {
                                id: 'pcvDoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                        
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 50 {%else%} 46 {% endif %}), width, 0);                   
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 40 {%else%} 36 {% endif %}), width, 0);
                                    ctx.restore();
                                    }
                                }
                    
                    
                            const pcvconfig = {
                    
                                type: 'bar',
                                    data: pcv,
                                    options: {
                                        scales: {
                                            y: {
                                                min: 0,
                                                max: {% if p.pcv > 60 %} {{p.pcv}} {%else%} 60 {% endif %},
                                            }
                                        }
                                    },     
                                    plugins: [pcvDoubleArbitraryLine]
                                };

                    
                            const pcvChart = new Chart(
                                document.getElementById('pcvChart'),
                                pcvconfig
                            );
                        </script>
                    {%else%} <div align='center'>Value not Availabale<br>Check the corresponding report (Image)<div>{%endif%}{%endfor%}

                </div>   
            </div>
        </div>


    <div class="row">
        <div class="col-md-4 mb-2">
            <div class="card h-100">
                <div class="card-header">
                    <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                    MCV (fL)
                </div>
                {% for p in pr4  %} {% if p.mcv > -1%}


                    <div class="card-body mcv" >
                        <canvas id="mcvChart"></canvas>
                    </div>
                    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                    <script>
                        //Red Blood Cell  Chart config
                
                        const mcv = {
                
                            labels: [{% for p in pr4  %} '{{ prof.testdate }}', {% endfor %}],
                            datasets: [{
                                label: 'Male & Female (80 - 98)',
                                data: [{% for p in pr4  %} {{ p.mcv }}, {% endfor %}],
                                backgroundColor: [
                                {% if profile.gender == "male" %}
                                    {% if 80 <= p.mcv and p.mcv <= 98 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                {%else%}
                                    {% if 80 <= p.mcv and p.mcv <= 98 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                {%endif%}

                            ],
                                borderColor: [
                                {% if profile.gender == "male" %}
                                    {% if 80 <= p.mcv and p.mcv <= 98 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                {%else%}
                                    {% if 80 <= p.mcv and p.mcv <= 98 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                {%endif%}

                            ],
                                borderWidth: 3
                            }] 
                        };

                        // doubleArbitraryLine Plugin
                        const mcvDoubleArbitraryLine = {
                            id: 'mcvDoubleArbitraryLine',
                            beforeDraw(chart, args, options) {
                                const { ctx, chartArea: { top, right, bottom, left, width, height },
                                scales: { x,y } } = chart;
                                ctx.save()
                                console.log(ctx)
                                    
                                // Success 
                                ctx.strokeStyle = 'black',
                                ctx.setLineDash([4, 4]),
                                ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 98 {%else%} 98 {% endif %}), width, 0);                   
                                ctx.restore();
                                // Danger 
                                ctx.strokeStyle = 'black',
                                ctx.setLineDash([4, 4]),
                                ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 80 {%else%} 80 {% endif %}), width, 0);
                                ctx.restore();
                                }
                            }
                
                
                        const mcvconfig = {
                
                            type: 'bar',
                                data: mcv,
                                options: {
                                    scales: {
                                        y: {
                                            min: 0,
                                            max: {% if p.mcv > 150 %} {{p.mcv}} {%else%} 150 {% endif %},
                                        }
                                    }
                                },     
                                plugins: [mcvDoubleArbitraryLine]
                            };

                
                        const mcvChart = new Chart(
                            document.getElementById('mcvChart'),
                            mcvconfig
                        );
                    </script>
                {%else%} <div align='center'>Value not Availabale<br>Check the corresponding report (Image)<div>{%endif%}{%endfor%}

            </div>   
        </div>

        <div class="col-md-4 mb-2">
            <div class="card h-100">
                <div class="card-header">
                    <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                    MCH (fmol)
                </div>
                {% for p in pr4  %} {% if p.mch > -1%}


                    <div class="card-body mch" >
                        <canvas id="mchChart"></canvas>
                    </div>
                    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                    <script>
                        //Red Blood Cell  Chart config
                
                        const mch = {
                
                            labels: [{% for p in pr4  %} '{{ prof.testdate }}', {% endfor %}],
                            datasets: [{
                                label: 'Male & Female (1.65 - 2)',
                                data: [{% for p in pr4  %} {{ p.mch }}, {% endfor %}],
                                backgroundColor: [
                                {% if profile.gender == "male" %}
                                    {% if 1.65 <= p.mch and p.mch <= 2 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                {%else%}
                                    {% if 1.65 <= p.mch and p.mch <= 2 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                {%endif%}

                            ],
                                borderColor: [
                                {% if profile.gender == "male" %}
                                    {% if 1.65 <= p.mch and p.mch <= 2 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                {%else%}
                                    {% if 1.65 <= p.mch and p.mch <= 2 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                {%endif%}

                            ],
                                borderWidth: 3
                            }] 
                        };

                        // doubleArbitraryLine Plugin
                        const mchDoubleArbitraryLine = {
                            id: 'mchDoubleArbitraryLine',
                            beforeDraw(chart, args, options) {
                                const { ctx, chartArea: { top, right, bottom, left, width, height },
                                scales: { x,y } } = chart;
                                ctx.save()
                                console.log(ctx)
                                    
                                // Success 
                                ctx.strokeStyle = 'black',
                                ctx.setLineDash([4, 4]),
                                ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 2 {%else%} 2 {% endif %}), width, 0);                   
                                ctx.restore();
                                // Danger 
                                ctx.strokeStyle = 'black',
                                ctx.setLineDash([4, 4]),
                                ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 1.65 {%else%} 1.65 {% endif %}), width, 0);
                                ctx.restore();
                                }
                            }
                
                
                        const mchconfig = {
                
                            type: 'bar',
                                data: mch,
                                options: {
                                    scales: {
                                        y: {
                                            min: 0,
                                            max: {% if p.mch > 3 %} {{p.mch}} {%else%} 3 {% endif %},
                                        }
                                    }
                                },     
                                plugins: [mchDoubleArbitraryLine]
                            };

                
                        const mchChart = new Chart(
                            document.getElementById('mchChart'),
                            mchconfig
                        );
                    </script>
                {%else%} <div align='center'>Value not Availabale<br>Check the corresponding report (Image)<div>{%endif%}{%endfor%}

            </div>   
        </div>

        <div class="col-md-4 mb-2">
            <div class="card h-100">
                <div class="card-header">
                    <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                    MCHC (mmol/L)
                </div>
                {% for p in pr4  %} {% if p.mchc > -1%}

                    <div class="card-body mchc" >
                        <canvas id="mchcChart"></canvas>
                    </div>
                    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                    <script>
                        //Red Blood Cell  Chart config
                
                        const mchc = {
                
                            labels: [{% for p in pr4  %} '{{ prof.testdate }}', {% endfor %}],
                            datasets: [{
                                label: 'Male & Female (18.6 - 22.3)',
                                data: [{% for p in pr4  %} {{ p.mchc }}, {% endfor %}],
                                backgroundColor: [
                                {% if profile.gender == "male" %}
                                    {% if 18.6 <= p.mchc and p.mchc <= 22.3 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                {%else%}
                                    {% if 18.6 <= p.mchc and p.mchc <= 22.3 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                {%endif%}

                            ],
                                borderColor: [
                                {% if profile.gender == "male" %}
                                    {% if 18.6 <= p.mchc and p.mchc <= 22.3 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                {%else%}
                                    {% if 18.6 <= p.mchc and p.mchc <= 22.3 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                {%endif%}

                            ],
                                borderWidth: 3
                            }] 
                        };

                        // doubleArbitraryLine Plugin
                        const mchcDoubleArbitraryLine = {
                            id: 'mchcDoubleArbitraryLine',
                            beforeDraw(chart, args, options) {
                                const { ctx, chartArea: { top, right, bottom, left, width, height },
                                scales: { x,y } } = chart;
                                ctx.save()
                                console.log(ctx)
                                    
                                // Success 
                                ctx.strokeStyle = 'black',
                                ctx.setLineDash([4, 4]),
                                ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 22.3 {%else%} 22.3 {% endif %}), width, 0);                   
                                ctx.restore();
                                // Danger 
                                ctx.strokeStyle = 'black',
                                ctx.setLineDash([4, 4]),
                                ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 18.6 {%else%} 18.6 {% endif %}), width, 0);
                                ctx.restore();
                                }
                            }
                
                
                        const mchcconfig = {
                
                            type: 'bar',
                                data: mchc,
                                options: {
                                    scales: {
                                        y: {
                                            min: 0,
                                            max: {% if p.mchc > 30 %} {{p.mchc}} {%else%} 30 {% endif %},
                                        }
                                    }
                                },     
                                plugins: [mchcDoubleArbitraryLine]
                            };

                
                        const mchcChart = new Chart(
                            document.getElementById('mchcChart'),
                            mchcconfig
                        );
                    </script>
                {%else%} <div align='center'>Value not Availabale<br>Check the corresponding report (Image)<div>{%endif%}{%endfor%}
            </div>   
        </div>
    </div>



        <div class="row">
            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        RDW-CV (%)
                    </div>
                    {% for p in pr4  %} {% if p.rdw > -1%}

                        <div class="card-body rdw" >
                            <canvas id="rdwChart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            //Red Blood Cell  Chart config
                    
                            const rdw = {
                    
                                labels: [{% for p in pr4  %} '{{ prof.testdate }}', {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female (11.5 - 15)',
                                    data: [{% for p in pr4  %} {{ p.rdw }}, {% endfor %}],
                                            backgroundColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 11.5 <= p.rdw and p.rdw <= 15 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%else%}
                                                {% if 11.5 <= p.rdw and p.rdw <= 15 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%endif%}

                                        ],
                                            borderColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 11.5 <= p.rdw and p.rdw <= 15 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%else%}
                                                {% if 11.5 <= p.rdw and p.rdw <= 15 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%endif%}

                                        ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const rdwDoubleArbitraryLine = {
                                id: 'rdwDoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                        
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 15 {%else%} 15 {% endif %}), width, 0);                   
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 11.5 {%else%} 11.5 {% endif %}), width, 0);
                                    ctx.restore();
                                    }
                                }
                    
                    
                            const rdwconfig = {
                    
                                type: 'bar',
                                    data: rdw,
                                    options: {
                                        scales: {
                                            y: {
                                                min: 0,
                                                max: {% if p.rdw > 20 %} {{p.rdw}} {%else%} 20 {% endif %},
                                            }
                                        }
                                    },     
                                    plugins: [rdwDoubleArbitraryLine]
                                };

                    
                            const rdwChart = new Chart(
                                document.getElementById('rdwChart'),
                                rdwconfig
                            );
                        </script>
                    {%else%} <div align='center'>Value not Availabale<br>Check the corresponding report (Image)<div>{%endif%}{%endfor%}

                </div>   
            </div>
            


            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        PCT (%)
                    </div>
                    {% for p in pr5  %} {% if p.pct > -1%}

                        <div class="card-body pct" >
                            <canvas id="pctChart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            //Red Blood Cell  Chart config
                    
                            const pct = {
                    
                                labels: [{% for p in pr5  %} '{{ prof.testdate }}', {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female (0.2 - 0.5)',
                                    data: [{% for p in pr5  %} {{ p.pct }}, {% endfor %}],
                                            backgroundColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 0.2 <= p.pct and p.pct <= 0.5 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%else%}
                                                {% if 0.2 <= p.eosinophil and p.eosinophil <= 0.5 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%endif%}

                                        ],
                                            borderColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 0.2 <= p.pct and p.pct <= 0.5 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%else%}
                                                {% if 0.2 <= p.pct and p.pct <= 0.5 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%endif%}

                                        ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const pctDoubleArbitraryLine = {
                                id: 'pctDoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                        
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 0.5 {%else%} 0.5 {% endif %}), width, 0);                   
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 0.2 {%else%} 0.2 {% endif %}), width, 0);
                                    ctx.restore();
                                    }
                                }
                    
                    
                            const pctconfig = {
                    
                                type: 'bar',
                                    data: pct,
                                    options: {
                                        scales: {
                                            y: {
                                                min: 0,
                                                max: {% if p.pct > 0.6 %} {{p.pct}} {%else%} 0.6 {% endif %},
                                            }
                                        }
                                    },     
                                    plugins: [pctDoubleArbitraryLine]
                                };

                    
                            const pctChart = new Chart(
                                document.getElementById('pctChart'),
                                pctconfig
                            );
                        </script>
                    {%else%} <div align='center'>Value not Availabale<br>Check the corresponding report (Image)<div>{%endif%}{%endfor%}

                </div>   
            </div>


            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        MPV (fL)
                    </div>
                    
                    {% for p in pr5  %} {% if p.mpv > -1%}
    
                        <div class="card-body mpv" >
                            <canvas id="mpvChart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            //Red Blood Cell  Chart config
                    
                            const mpv = {
                    
                                labels: [{% for p in pr5  %} '{{ prof.testdate }}', {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female (7.0 - 12.0)',
                                    data: [{% for p in pr5  %} {{ p.mpv }}, {% endfor %}],
                                            backgroundColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 7 <= p.mpv and p.mpv <= 12 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%else%}
                                                {% if 7 <= p.mpv and p.mpv <= 12 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%endif%}

                                        ],
                                            borderColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 7 <= p.mpv and p.mpv <= 12 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%else%}
                                                {% if 7 <= p.mpv and p.mpv <= 12 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%endif%}

                                        ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const mpvDoubleArbitraryLine = {
                                id: 'mpvDoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                        
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 12 {%else%} 12 {% endif %}), width, 0);                   
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 7 {%else%} 7 {% endif %}), width, 0);
                                    ctx.restore();
                                    }
                                }
                    
                    
                            const mpvconfig = {
                    
                                type: 'bar',
                                    data: mpv,
                                    options: {
                                        scales: {
                                            y: {
                                                min: 0,
                                                max: {% if p.mpv > 15 %} {{p.mpv}} {%else%} 15 {% endif %},
                                            }
                                        }
                                    },     
                                    plugins: [mpvDoubleArbitraryLine]
                                };

                    
                            const mpvChart = new Chart(
                                document.getElementById('mpvChart'),
                                mpvconfig
                            );
                        </script>
                    {%else%} <div align='center'>Value not Availabale<br>Check the corresponding report (Image)<div>{%endif%}{%endfor%}

                </div>   
            </div>
        </div>





        <div class="row">
            <div class="col-md-4 mb-2">
                <div class="card h-100">
                    <div class="card-header">
                        <span class="me-2"><i class="bi bi-bar-chart-fill"></i></span>
                        PDW (%)
                    </div>
                    {% for p in pr5 %} {% if p.pdw > -1%}
    
                        <div class="card-body pdw" >
                            <canvas id="pdwChart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            //Red Blood Cell  Chart config
                    
                            const pdw = {
                    
                                labels: [{% for p in pr5  %} '{{ prof.testdate }}', {% endfor %}],
                                datasets: [{
                                    label: 'Male & Female (9% - 18%)',
                                    data: [{% for p in pr5  %} {{ p.pdw }}, {% endfor %}],
                                            backgroundColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 9 <= p.pdw and p.pdw <= 18 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%else%}
                                                {% if 9 <= p.pdw and p.pdw <= 18 %}'rgba(50, 255, 50, 0.2)' {%else%} 'rgba(255, 50, 50, 0.2)'{%endif%}
                                            {%endif%}

                                        ],
                                            borderColor: [
                                            {% if profile.gender == "male" %}
                                                {% if 9 <= p.pdw and p.pdw <= 18 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%else%}
                                                {% if 9 <= p.pdw and p.pdw <= 18 %}'rgba(50, 255, 50, 1)' {%else%} 'rgba(255, 50, 50, 1)'{%endif%}
                                            {%endif%}

                                        ],
                                    borderWidth: 3
                                }] 
                            };

                            // doubleArbitraryLine Plugin
                            const pdwDoubleArbitraryLine = {
                                id: 'pdwDoubleArbitraryLine',
                                beforeDraw(chart, args, options) {
                                    const { ctx, chartArea: { top, right, bottom, left, width, height },
                                    scales: { x,y } } = chart;
                                    ctx.save()
                                    console.log(ctx)
                                        
                                    // Success 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 18 {%else%} 18 {% endif %}), width, 0);                   
                                    ctx.restore();
                                    // Danger 
                                    ctx.strokeStyle = 'black',
                                    ctx.setLineDash([4, 4]),
                                    ctx.strokeRect(left, y.getPixelForValue({% if profile.gender == "male" %} 9 {%else%} 9 {% endif %}), width, 0);
                                    ctx.restore();
                                    }
                                }
                    
                    
                            const pdwconfig = {
                    
                                type: 'bar',
                                    data: pdw,
                                    options: {
                                        scales: {
                                            y: {
                                                min: 0,
                                                max: {% if p.pdw > 20 %} {{p.pdw}} {%else%} 20 {% endif %},
                                            }
                                        }
                                    },     
                                    plugins: [pdwDoubleArbitraryLine]
                                };

                    
                            const pdwChart = new Chart(
                                document.getElementById('pdwChart'),
                                pdwconfig
                            );
                        </script>
                    {%else%} <div align='center'>Value not Availabale<br>Check the corresponding report (Image)<div>{%endif%}{%endfor%}
                </div>   
            </div>
      </div>
    </section>


</main>

{% endblock  %}
